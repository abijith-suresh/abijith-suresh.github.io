---
import Link from "@/components/Link.astro";
import { cn, formatBlogDate } from "@/lib/utils";
import type { CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"blog">;
  class?: string;
}

const { post, class: className } = Astro.props;
const { title, description, tags, image, publishDate } = post.data;
const postUrl = `/blog/${post.slug}`;
const formattedDate = formatBlogDate(publishDate);
const postImage = image || "/placeholder-blog.jpg";
---

<article class={cn("group", className)}>
  <Link
    href={postUrl}
    class={cn(
      "flex flex-col sm:flex-row gap-4 overflow-hidden border border-border rounded-lg",
      "hover:bg-muted/50 transition-all duration-300 ease-in-out",
      "hover:shadow-md"
    )}
  >
    <div class="aspect-video sm:aspect-auto w-full sm:max-w-[256px] sm:shrink-0 overflow-hidden bg-muted">
      <img
        src={postImage}
        alt={title}
        class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
      />
    </div>
    <div class="p-4 grow">
      <div class="flex items-start justify-between gap-2 mb-2">
        <h3 class="text-lg font-medium text-foreground transition-colors">
          {title}
        </h3>
      </div>
      <p class="text-sm text-muted-foreground/80 mb-1">
        {formattedDate}
      </p>
      <p class="text-sm text-muted-foreground mb-3 line-clamp-2">
        {description}
      </p>
      <div class="flex flex-wrap gap-2">
        {tags.map((tag) => (
          <span class="text-xs px-2 py-1 bg-muted text-muted-foreground rounded-md">
            {tag}
          </span>
        ))}
      </div>
    </div>
  </Link>
</article>
