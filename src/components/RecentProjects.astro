---
import Link from "@/components/Link.astro";
import ProjectCard from "@/components/ProjectCard.astro";
import { getAllProjects, sortProjects } from "@/lib/data-utils";
import { cn } from "@/lib/utils";
import { ArrowRight } from "lucide-astro";

const allProjects = await getAllProjects();
const sortedProjects = sortProjects(allProjects, "date");
const recentProjects = sortedProjects.slice(0, 3);
---

<section class="flex flex-col gap-y-4">
  <div class="flex items-center justify-between">
    <h2 class="text-2xl font-medium text-foreground">Latest Projects</h2>
    <Link
      href="/projects"
      class:list={cn(
        "inline-flex items-center gap-1.5 text-sm",
        "text-foreground/60 hover:text-foreground",
        "transition-colors group"
      )}
    >
      View all
      <ArrowRight size={14} class="transition-transform group-hover:translate-x-1" />
    </Link>
  </div>

  <div class="flex flex-col gap-6">
    {recentProjects.map((project) => <ProjectCard project={project} />)}
  </div>
</section>
