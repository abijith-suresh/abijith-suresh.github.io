---
import Link from "@/components/Link.astro";
import { Icon } from "astro-icon/components";

interface BreadcrumbItem {
  label: string;
  href?: string;
  icon?: string;
}

interface Props {
  items: BreadcrumbItem[];
  class?: string;
}

const { items, class: className } = Astro.props;

const ICON_MAP: Record<string, string> = {
  home: "fa6-solid:house",
  blog: "fa6-solid:book-open",
  blogpost: "fa6-solid:file-lines",
  projects: "fa6-solid:code",
  project: "fa6-solid:folder-open",
  tags: "fa6-solid:tags",
  tag: "fa6-solid:tag",
  about: "fa6-solid:user",
};
---

<nav
  aria-label="Breadcrumb"
  class:list={["flex items-center gap-1.5 text-sm text-muted-foreground", className]}
>
  {
    items.map((item, index) => {
      const iconName = item.icon ? ICON_MAP[item.icon] : null;

      return (
        <>
          {item.href ? (
            <Link
              href={item.href}
              class="inline-flex items-center gap-1.5 hover:text-foreground transition-colors"
            >
              {iconName && <Icon name={iconName} class="w-3.5 h-3.5" />}
              {item.label}
            </Link>
          ) : (
            <span class="inline-flex items-center gap-1.5 text-foreground truncate">
              {iconName && <Icon name={iconName} class="w-3.5 h-3.5" />}
              {item.label}
            </span>
          )}
          {index < items.length - 1 && (
            <Icon
              name="fa6-solid:chevron-right"
              class="w-3.5 h-3.5 text-muted-foreground/40 shrink-0"
            />
          )}
        </>
      );
    })
  }
</nav>
