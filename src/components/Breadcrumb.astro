---
import Link from "@/components/Link.astro";
import {
  BookOpen,
  ChevronRight,
  Code,
  FileText,
  FolderOpen,
  Home,
  Tag,
  Tags,
  User,
} from "lucide-astro";

interface BreadcrumbItem {
  label: string;
  href?: string;
  icon?: string;
}

interface Props {
  items: BreadcrumbItem[];
  class?: string;
}

const { items, class: className } = Astro.props;

const ICON_MAP: Record<string, typeof Home> = {
  home: Home,
  blog: BookOpen,
  blogpost: FileText,
  projects: Code,
  project: FolderOpen,
  tags: Tags,
  tag: Tag,
  about: User,
};
---

<nav
  aria-label="Breadcrumb"
  class:list={["flex items-center gap-1.5 text-sm text-muted-foreground", className]}
>
  {
    items.map((item, index) => {
      const IconComponent = item.icon ? ICON_MAP[item.icon] : null;

      return (
        <>
          {item.href ? (
            <Link
              href={item.href}
              class="inline-flex items-center gap-1.5 hover:text-foreground transition-colors"
            >
              {IconComponent && <IconComponent size={14} />}
              {item.label}
            </Link>
          ) : (
            <span class="inline-flex items-center gap-1.5 text-foreground truncate">
              {IconComponent && <IconComponent size={14} />}
              {item.label}
            </span>
          )}
          {index < items.length - 1 && (
            <ChevronRight size={14} class="text-muted-foreground/40 shrink-0" />
          )}
        </>
      );
    })
  }
</nav>
