---
import Breadcrumb from "@/components/Breadcrumb.astro";
import Link from "@/components/Link.astro";
import { SITE } from "@/consts";
import Layout from "@/layouts/Layout.astro";
import { getAllContentTagCounts } from "@/lib/content-tags";

const tags = await getAllContentTagCounts();
---

<Layout
  title={`All Tags - ${SITE.title}`}
  description="Browse all blog posts and projects by topic. Explore tags and discover content that interests you."
  jsonLd={{ type: "website" }}
>
  <div class="w-full mx-auto flex grow flex-col gap-y-8 px-4 max-w-3xl pb-12 page-enter">
    <div class="page-enter page-enter-delay-1">
      <Breadcrumb
        items={[
          { label: "Home", href: "/", icon: "home" },
          { label: "Tags", icon: "tags" },
        ]}
      />
    </div>

    <div class="flex flex-col gap-y-2 page-enter page-enter-delay-2">
      <h1 class="text-3xl font-semibold text-foreground">All Tags</h1>
      <p class="text-sm text-muted-foreground">Browse posts and projects by topic</p>
    </div>

    {
      tags.length > 0 ? (
        <div class="flex flex-wrap gap-2">
          {tags.map(({ tag, totalCount }) => (
            <Link
              href={`/tags/${tag}`}
              class="inline-flex items-center gap-2 px-3 py-2 border border-border/60 hover:border-border hover:bg-accent text-foreground rounded-lg transition-all"
            >
              <span class="text-sm">{tag}</span>
              <span class="text-xs" style="color: var(--color-warm);">
                {totalCount}
              </span>
            </Link>
          ))}
        </div>
      ) : (
        <p class="text-muted-foreground text-center py-8">No tags found.</p>
      )
    }
  </div>
</Layout>
