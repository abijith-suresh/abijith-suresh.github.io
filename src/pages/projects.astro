---
import Header from "@/components/Header.astro";
import ProjectCard from "@/components/ProjectCard.astro";
import { SITE } from "@/consts";
import Layout from "@/layouts/Layout.astro";
import { getAllProjects, sortProjects } from "@/lib/data-utils";
import "@/styles/global.css";

const allProjects = await getAllProjects();
const sortedProjects = sortProjects(allProjects, "date");
---

<Layout
  title={`Projects - ${SITE.title}`}
  description="A collection of projects I've built, including web applications, tools, and experiments."
>
  <Header />
  <main class="w-full mx-auto flex grow flex-col gap-y-8 px-4 max-w-3xl pb-12">
    <div class="flex flex-col gap-y-2">
      <h1 class="text-3xl font-bold text-foreground">Projects</h1>
      <p class="text-muted-foreground">
        A collection of projects I've built, ranging from web applications to CLI tools.
      </p>
    </div>

    {sortedProjects.length > 0 ? (
      <div class="flex flex-col gap-6">
        {sortedProjects.map((project) => (
          <ProjectCard project={project} />
        ))}
      </div>
    ) : (
      <p class="text-muted-foreground text-center py-8">
        No projects to display yet.
      </p>
    )}
  </main>
</Layout>
