---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
---

<Layout
  title="Search"
  description="Search blog posts and projects"
  jsonLd={{
    type: "WebPage",
    name: "Search",
  }}
>
  <Header slot="header" />

  <main class="w-full mx-auto flex grow flex-col gap-y-8 px-4 max-w-3xl pb-12">
    <div>
      <h1 class="text-3xl font-bold tracking-tight">Search</h1>
      <p class="mt-2 text-muted-foreground">Find blog posts and projects</p>
    </div>

    <div id="search"></div>
  </main>
</Layout>

<style is:global>
  :root {
    --pagefind-ui-scale: 1;
    --pagefind-ui-primary: var(--primary);
    --pagefind-ui-text: var(--foreground);
    --pagefind-ui-background: var(--background);
    --pagefind-ui-border: var(--border);
    --pagefind-ui-tag: var(--muted);
    --pagefind-ui-border-width: 1px;
    --pagefind-ui-border-radius: 0.5rem;
    --pagefind-ui-image-border-radius: 0.5rem;
    --pagefind-ui-image-box-ratio: 3 / 2;
    --pagefind-ui-font: inherit;
  }

  .pagefind-ui__search-input {
    background-color: var(--background);
    border: 1px solid var(--border);
    color: var(--foreground);
  }

  .pagefind-ui__search-input:focus {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
  }

  .pagefind-ui__result {
    border: 1px solid var(--border);
    background-color: var(--card);
  }

  .pagefind-ui__result:hover {
    background-color: var(--muted);
  }

  .pagefind-ui__result-title {
    color: var(--foreground);
  }

  .pagefind-ui__result-excerpt {
    color: var(--muted-foreground);
  }

  .pagefind-ui__message {
    color: var(--muted-foreground);
  }

  .pagefind-ui__button {
    background-color: var(--primary);
    color: var(--primary-foreground);
    border: none;
  }

  .pagefind-ui__button:hover {
    opacity: 0.9;
  }
</style>

<script>
  import { PagefindUI } from "@pagefind/default-ui";

  // Initialize Pagefind UI
  new PagefindUI({
    element: "#search",
    showImages: false,
    highlightParam: "highlight",
    excerptLength: 30,
  });
</script>
